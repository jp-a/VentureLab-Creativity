<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'/>
    <meta http-equiv="X-UA-Compatible" content="chrome=1"/>
    <meta name="description" content="Venturelab-creativity : "/>

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/graph.css">

    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript" src="javascripts/vendors/d3/d3.v2.js"></script>
    <!--<script type="text/javascript" src="javascripts/vendors/oocharts/2.1/oocharts.js"></script>-->

    <title>Venture Lab - Creativity</title>

    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-35793867-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>

<body>

<!-- HEADER -->
<div id="header_wrap" class="outer">
    <header class="inner">
        <!--<a id="forkme_banner" href="https://github.com/jp-a/VentureLab-Creativity">View on GitHub</a>-->

        <h1 id="project_title">Venture Lab - Creativity Course - Hi5 Team</h1>

        <h2 id="project_tagline"></h2>

        <section id="likes">
            <!-- Place this tag where you want the +1 button to render. -->
            <div class="g-plusone" data-annotation="inline" data-width="300"></div>

            <!-- Place this tag after the last +1 button tag. -->
            <script type="text/javascript">
                (function () {
                    var po = document.createElement( 'script' );
                    po.type = 'text/javascript';
                    po.async = true;
                    po.src = 'https://apis.google.com/js/plusone.js';
                    var s = document.getElementsByTagName( 'script' )[0];
                    s.parentNode.insertBefore( po, s );
                })();
            </script>

        </section>

        <!--<section id="downloads">-->
        <!--<a class="zip_download_link" href="https://github.com/jp-a/VentureLab-Creativity/zipball/master">Download this project as a .zip file</a>-->
        <!--<a class="tar_download_link" href="https://github.com/jp-a/VentureLab-Creativity/tarball/master">Download this project as a tar.gz file</a>-->
        <!--</section>-->
    </header>

</div>

<!-- MAIN CONTENT -->
<div id="main_content_wrap" class="outer">
    <section id="main_content" class="inner">
        <h3>THINGS WE HAVE IN COMMON</h3>
        <p>
            To find what we have in common, we have used a Google Sheet were any of us could add anything.<br/>
            The other had to select the ones relevant to them too and we just had to choose the ones that were selected by everyone of us to find what we all have in common.<br/>
            To share this with the rest of the class, we wanted to find a visual way that shows what links us together.<br/>
        </p>


        <div id="graph"/>

    </section>

    <section id="comments" class="inner">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'venturelab-creativity'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement( 'script' );
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName( 'head' )[0] || document.getElementsByTagName( 'body' )[0]).appendChild( dsq );
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span
                class="logo-disqus">Disqus</span></a>
    </section>
</div>


<script type="text/javascript" charset="utf-8">
if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)) { //test for MSIE x.x;
//if (true) { //test for MSIE x.x;
    var ieversion=new Number(RegExp.$1) // capture x.x portion and store as a number
//    if (ieversion>=8)
//        $( '#graph' ).html("You're using IE8 or above")
//    else if (ieversion>=7)
//        document.write("You're using IE7.x")
//    else if (ieversion>=6)
//        document.write("You're using IE6.x")
//    else if (ieversion>=5)
//        document.write("You're using IE5.x")

    $( '#graph' ).html( "<em>Now, it seems like you are using Internet Explorer. The graph cannot be rendered dynamically and is displayed as a static image instead. Please consider using Chrome or Firefox instead....</em><br/><img src='images/static_graph.png'/>" )

}
else
{
$( '#graph' ).html( "<em>Because the graph is dynamically rendered, you can drag one person away to see what links this person to the 3 other ones...</em>" );
var w = 960, h = 640;

var labelDistance = 5;

var vis = d3.select( "#graph" ).append( "svg:svg" ).attr( "width", w ).attr( "height", h );

var nodes = [
    {   label: 'Jean-Philippe'
        , type: 'person'
        , id: 'jpa'
        , img: 'images/nodes/jpa.png'
    },
    {   label: 'Madan'
        , type: 'person'
        , id: 'madan'
        , img: 'images/nodes/madan.png'
    },
    {   label: 'Faith'
        , type: 'person'
        , id: 'faith'
        , img: 'images/nodes/faith.png'
    },
    {   label: 'Greg'
        , type: 'person'
        , id: 'greg'
        , img: 'images/nodes/greg.png'
    },
    { label: 'We like art' },
    { label: 'We have a car' },
    { label: 'We am married' },
    { label: 'We have a child' },
    { label: 'We like nature' },
    { label: 'We like travelling' },
    { label: 'We are spiritual' },
    { label: 'We like long conversations' },
    { label: 'We like nice food' },
    { label: 'We like wine' },
    { label: 'We like being creative' },
    { label: 'We like to be on time' }
];

var labelAnchors = [];
for ( var i = 0; i < nodes.length; i++ ) {
    labelAnchors.push( {
        node: nodes[ i ]
    } );
    labelAnchors.push( {
        node: nodes[ i ]
    } );
}

// Labels
var labelAnchorLinks = [];
for ( var i = 0; i < nodes.length; i++ ) {
    labelAnchorLinks.push( {
        source: i * 2,
        target: i * 2 + 1,
        weight: 1
    } );
};

// Links
var links = [];
for ( var s = 0; s < 4; s++ ) {
    for ( var t = 4; t < nodes.length; t++ ) {
        links.push( {
            source: s,
            target: t,
            weight: 1
        } );
    }
};


var force = d3.layout
        .force()
        .size( [w, h] )
        .nodes( nodes )
        .links( links )
        .gravity( 1 )
        .linkDistance( 150 )
        .charge( -3000 )
        .linkStrength( function ( x ) {
            return x.weight * 5
        } );


force.start();

var force2 = d3.layout
        .force()
        .nodes( labelAnchors )
        .links( labelAnchorLinks )
        .gravity( 0 )
        .linkDistance( 0 )
        .linkStrength( 8 )
        .charge( -100 )
        .size( [w, h] );
force2.start();

var link = vis.selectAll( "line.link" )
        .data( links )
        .enter()
        .append( "svg:line" )
        .attr( "class", "link" )
        .style( "stroke", "#CCC" );

var node = vis.selectAll( "g.node" )
        .data( force.nodes() )
        .enter()
        .append( "svg:g" )
        .attr( "class", "node" )
        .attr( "id", function ( d, i ) {
            return d.id
        } );

node.append( "svg:circle" )
        .attr( "r", function ( d, i ) {
            return ( d.type == 'person' ) ? 10 : 5;
        } )
        .style( "fill", function ( d, i ) {
            return ( d.type == 'person' ) ? "" : "#555";
        } )
        .style( "stroke", "#FFF" )
        .style( "stroke-width", 3 );

node.append( "svg:image" )
        .attr( "class", "circle-img" )
        .attr( "xlink:href", function ( d, i ) {
            return ( d.type == 'person' ) ? d.img : '';
        } )
    //.attr( "style", function ( d, i ) { return ( d.type == 'person' ) ? 'background-image: url('+d.img+')' : ''; }  )
        .attr( "x", function ( d, i ) {
            return ( d.type == 'person' ) ? '-13px' : '-8px';
        } )
        .attr( "y", function ( d, i ) {
            return ( d.type == 'person' ) ? '-13px' : '-8px';
        } )
        .attr( "width", function ( d, i ) {
            return ( d.type == 'person' ) ? '26px' : '16px';
        } )
        .attr( "height", function ( d, i ) {
            return ( d.type == 'person' ) ? '26px' : '16px';
        } );

node.call( force.drag );


var anchorLink = vis.selectAll( "line.anchorLink" )
        .data( labelAnchorLinks )
//.enter().append( "svg:line" ).attr( "class", "anchorLink" ).style( "stroke", "#999" );

var anchorNode = vis.selectAll( "g.anchorNode" )
        .data( force2.nodes() )
        .enter()
        .append( "svg:g" )
        .attr( "class", "anchorNode" );
anchorNode.append( "svg:circle" )
        .attr( "r", 0 )
        .style( "fill", "#FFF" );
anchorNode.append( "svg:text" )
        .text(function ( d, i ) {
            return i % 2 == 0 ? "" : d.node.label
        } ).style( "fill", "#555" ).style( "font-family", "Arial" ).style( "font-size", 12 );

var updateLink = function () {
    this.attr( "x1",function ( d ) {
        return d.source.x;
    } ).attr( "y1",function ( d ) {
                return d.source.y;
            } ).attr( "x2",function ( d ) {
                return d.target.x;
            } ).attr( "y2", function ( d ) {
                return d.target.y;
            } );

}

var updateNode = function () {
    this.attr( "transform", function ( d ) {
        return "translate(" + d.x + "," + d.y + ")";
    } );
}


force.on( "tick", function () {

    force2.start();

    node.call( updateNode );

    anchorNode.each( function ( d, i ) {
        if ( i % 2 == 0 ) {
            d.x = d.node.x;
            d.y = d.node.y;
        } else {
            var b = this.childNodes[1].getBBox();

            var diffX = d.x - d.node.x;
            var diffY = d.y - d.node.y;

            var dist = Math.sqrt( diffX * diffX + diffY * diffY );

            var shiftX = b.width * (diffX - dist) / (dist * 2);
            shiftX = Math.max( -b.width, Math.min( 0, shiftX ) );
            var shiftY = 5;
            this.childNodes[1].setAttribute( "transform", "translate(" + shiftX + "," + shiftY + ")" );
        }
    } );


    anchorNode.call( updateNode );

    link.call( updateLink );
    anchorLink.call( updateLink );

} );
}
</script>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
    <footer class="inner">
        <p class="copyright">Venture Lab - Creativity Course - by <a href="https://github.com/jp-a">Hi5</a> Team</p>

        <p>Source available on <a
                href="https://github.com/jp-a/VentureLab-Creativity/blob/gh-pages/index.html">GitHub</a></p>

        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
    </footer>
</div>


</body>
</html>
